<!DOCTYPE html>
<title>FUNCITY HEAVY INDUSTRIES POWER GRID</title>
<link rel="shortcut icon" type="image/jpg" href="../images/smile.gif"/>

<style>
	body {
		color: white;
		background-image: url('../play/images/marbledark.jpg');
		background-size: cover;
		font-family: MingLiU-ExtB, Microsoft Yi Baiti;
	}
	div.inline {
		float:left; 
	}
</style>

<div style='background-color: rgb(0 0 0 / 0.5); 
	position: absolute; 
	width: 1000px;
	height: 860px;
	top: 50%;
	left: 50%;
	-ms-transform: translate(-40%, -50%);
	transform: translate(-40%, -50%);'>
	<canvas id="life" width="1000" height="800" onclick="mouseclick(event)" onmousemove="move(event)" onmousedown="mousedown(event)" onmouseup="mouseup(event)"></canvas>
	<br>
	<center>
		It's wires.
	</center>
	<div class="slidecontainer" style='
		background-color: rgb(0 0 0 / 0.5);
		float: left;
		position: absolute;
		width: 256px;
		right: 102%;
		top: 0;
		height: 860px;
		'>
		<div style="padding: 10px;">
			<h4>FUNCITY HEAVY INDUSTRIES POWER GRID</h4>
			<img src='../images/hat_walk.gif'/> <br>
			<input type="button" value="Eraser" onclick="getvalue()"> 
			<input type="button" value="Head" onclick="getvalue()"> 
			<input type="button" value="Tail" onclick="getvalue()"> 
			<input type="button" value="Conductor" onclick="getvalue()"> <br><br>
			Play/Pause <input type="checkbox" id="play_switch" checked><br><br>
			<a href='./wire.html' style='color: white;'>Reset</a> <br><br>
			<a href='http://funcity-online.com/' style='color: white;'>Home</a>
		</div>
	</div>
	
<script>
    size = 8;
	width = { screen: 1000 };
    height = { screen: 800 };
    width.grid = width.screen / size;
    height.grid = height.screen / size;
	
	document.getElementById("life").width = width.screen;
	document.getElementById("life").height = height.screen;
	m = document.getElementById("life").getContext("2d");
	play_switch = document.getElementById("play_switch");
	
    mouse = {
        x: width.screen/2,
        xgrid: width.screen/2/size,
        y: height.screen/2,
        ygrid: height.screen/2/size,
        m1: false
    }
	
	function getvalue() {
        switch (event.target.value) {
            case "Eraser":
                paint_cell_id = 0;
                break;
            case "Head":
                paint_cell_id = 1;
                break;
            case "Tail" :
                paint_cell_id = 2;
                break;
            case "Conductor":
                paint_cell_id = 3;
                break;
        }
	}

	function mousedown(e) { mouse.m1 = true; };
	function mouseup(e) { mouse.m1 = false; };
	function mouseclick(e){	};
	function move(e){
        mouse.x = e.offsetX;	
		mouse.y = e.offsetY;	
		mouse.xgrid = Math.round(mouse.x / size);
		mouse.ygrid = Math.round(mouse.y / size);
	};
    
    function clamp (val, min, max) { return Math.min(Math.max(val, min), max); }
    function clamp_width (val) { return Math.min(Math.max(val, 0), width.grid);	}
    function clamp_height (val) { return Math.min(Math.max(val, 0), height.grid); }
	
	function create(width, height) {

	};
	
	function clear_canvas() {
		m.clearRect(0, 0, width.screen, height.screen);
		draw(0, 0, "#0a0a0a", Math.max(width.screen, height.screen));
	};
	
	function draw(x, y, c, s) {
		m.fillStyle = c;
		m.fillRect(x, y, s, s);
	};
	
	function paint_cells(type) {

	}
	
	function count_neighbors(x,y){
		let neighbor_count = 0	

		return neighbor_count;
	}
	
	function update() {
		clear_canvas();
		if(mouse.m1) { paint_cells(paint_cell_id); }
		requestAnimationFrame(update);
	};
	create(width.grid, height.grid);	
	update();
	
</script>